<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Você Ganhou!</title>
    
    <style>
        /* Reset básico */
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        /* Corpo */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, 
                         Oxygen, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
            background-color: #f5f5f7; /* leve cinza, estilo Apple */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;  /* ocupar toda a tela */
            color: #333;
        }

        /* Container principal */
        .winner-container {
            background-color: #fff;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            text-align: center;
            width: 90%;
            max-width: 480px;
            transition: opacity 0.6s ease; /* transição suave opcional */
        }

        .winner-container h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: #000;  /* texto mais escuro */
        }

        .winner-container p {
            font-size: 1rem;
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        .winner-container .prize {
            font-size: 1.25rem;
            font-weight: 600;
            color: #000;
            margin-bottom: 1.5rem;
        }

        /* Botão estilo Apple-minimalista */
        .winner-container a {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            background-color: #000;
            color: #fff;
            text-decoration: none;
            border-radius: 9999px; 
            font-size: 1rem;
            transition: background-color 0.3s ease;
            margin-top: 1rem; /* espaçamento do botão */
        }
        .winner-container a:hover {
            background-color: #444;
        }

        /* Mensagens Flash (similar ao que usamos no index) */
        .flashes {
            margin-bottom: 1rem;
        }
        .message-banner {
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
            color: #fff;
            text-align: center;
        }
        .message-banner.success {
            background-color: #4caf50; /* verde Apple-ish */
        }
        .message-banner.error {
            background-color: #f44336; /* vermelho */
        }
        .message-banner.info {
            background-color: #2196f3; /* azul */
        }

        /* Estado oculto */
        .hidden {
            display: none;
        }

        /* Responsividade */
        @media (max-width: 480px) {
            .winner-container {
                padding: 1.5rem;
            }
            .winner-container h1 {
                font-size: 1.6rem;
            }
            .winner-container p {
                font-size: 0.95rem;
            }
            .winner-container .prize {
                font-size: 1.15rem;
            }
            .winner-container a {
                padding: 0.6rem 1.2rem;
                font-size: 0.95rem;
            }
        }
    </style>
</head>
<body>
    <!-- Container principal: exibe a etapa 1 (parabéns) e depois a etapa 2 (quem venceu) -->
    <div class="winner-container">

        <!-- Exibição de mensagens flash, se houver -->
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            <div class="flashes">
              {% for category, message in messages %}
                <div class="message-banner {{ category }}">
                  {{ message }}
                </div>
              {% endfor %}
            </div>
          {% endif %}
        {% endwith %}

        <!-- BLOCO DE ETAPA 1 (APARECE PRIMEIRO) -->
        <div id="winner-step-1">
          <h1>Parabéns, {{ username }}!</h1>
          <p>Você acertou a combinação do cofre.</p>
          <p class="prize">Prêmio: {{ safe.prize }}</p>

          <p>
            Em instantes, entraremos em contato pelo seu Instagram <strong>{{ username }}</strong> 
            para conferir se todas as regras foram cumpridas e efetuar o pagamento do prêmio.
          </p>

          <p><em>(Esta tela mudará automaticamente em até 1 minuto.)</em></p>
        </div>

        <!-- BLOCO DE ETAPA 2 (APARECE APÓS 1 MINUTO) -->
        <div id="winner-step-2" class="hidden">
          <h1>{{ username }} foi o vencedor!</h1>
          <p>
            Após confirmarmos todas as regras e efetuarmos o pagamento do prêmio ao vencedor, 
            o cofre será reiniciado com novas promoções.
          </p>
          <p>
            Fique de olho: em breve, mais oportunidades de ganhar prêmios incríveis!
          </p>
          <a href="{{ url_for('index') }}">Voltar ao Início</a>
        </div>
    </div>

    <script>
      // Após 60 segundos, ocultamos o "winner-step-1" e exibimos "winner-step-2"
      window.addEventListener('load', function(){
        setTimeout(() => {
          const step1 = document.getElementById('winner-step-1');
          const step2 = document.getElementById('winner-step-2');

          // Oculta o step1
          step1.classList.add('hidden');
          // Mostra o step2
          step2.classList.remove('hidden');
        }, 60000); // 60000 ms = 1 minuto
      });
    </script>
</body>
</html>
